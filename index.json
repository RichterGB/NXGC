[{
    "title": "Instal Nextcloud on Raspberry Pi 4 with Debian11",
    "date": "",
    "description": "",
    "body": "New Nextcloud deployment:   Nextcloud\n Update Debian 11   # update \u0026amp;\u0026amp; upgrade  Set an static IP address   # vi /etc/network/interfaces.d/eth0 Use the following configuration auto eth0 # iface eth0 inet dhcp # iface eth0 inet6 auto iface eth0 inet static address 192.168.1.40 netmask 255.255.255.0 gateway 192.168.1.254 dns-nameserver 200.67.220.220 dns-nameserver 200.67.222.222  Resizing Filesystem  # resize2fs /dev/sda2    Install the following tools   # apt install wget ntp bzip2 htop tcpdump PHP 8 Sources: # wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg # apt -y install apt-transport-https lsb-release ca-certificates # echo \u0026quot;deb https://packages.sury.org/php/ $(lsb_release -sc) main\u0026quot; \u0026gt; /etc/apt/sources.list.d/php.list # apt update \u0026amp;\u0026amp; apt upgrade  Installing Applications and Services  Installing Apache  # apt -y install apache2   Installing MySQL  # apt -y install mariadb-server   Installing Redis  # apt -y install redis-server   Installing FFMPEG and LibreOffice  # apt -y install ffmpeg libreoffice   Installing PHP 8.0 and Modules  # apt -y install php8.0 php8.0-curl php8.0-gd php8.0-zip php8.0-mbstring php8.0-xml php8.0-mysql php8.0-intl php8.0-bz2 php-smbclient php8.0-imap php8.0-redis php8.0-bcmath php8.0-gmp php8.0-imagick libapache2-mod-php8.0 php8.0-fpm php8.0-opcache imagemagick     Configure php.ini in fpm, apache2, cli   # sed -i -e '/post_max_size =/ s/= .*/= 16G/' $(find /etc/php/8.0/ -type f) # sed -i -e '/upload_max_filesize =/ s/= .*/= 16G/' $(find /etc/php/8.0/ -type f) # sed -i -e '/max_input_time =/ s/= .*/= 3600/' $(find /etc/php/8.0/ -type f) # sed -i -e '/max_execution_time =/ s/= .*/= 3600/' $(find /etc/php/8.0/ -type f) # sed -i -e '/memory_limit =/ s/= .*/= 512M/' $(find /etc/php/8.0/ -type f) # sed -i -e '/output_buffering =/ s/= .*/= 0/' $(find /etc/php/8.0/ -type f)  MariaDB initial configuration -# mysql_secure_installation   Enter the following values  Switch to unix_socket authentication [Y/n]  Enter: N   Change the root password? [Y/n]  Enter: Y   Enter current password for root (enter for none):  Type: N3xtCl0ud   Remove anonymous users? [Y/n]  Enter: Y   Disallow root login remotely? [Y/n]  Enter: Y   Remove test database and access to it? [Y/n]  Enter: Y   Reload privilege tables now? [Y/n]  Enter: Y     Setup Nextcloud Database  # mysql -u root -p Create Nextcloud Database  CREATE DATABASE nextcloud;   Create Admin User  CREATE USER 'admin'@'localhost' IDENTIFIED BY 'N3xtCl0ud';   Grant Admin Privileges  GRANT ALL PRIVILEGES ON nextcloud.* TO 'admin'@'localhost';   Flush Privileges  FLUSH PRIVILEGES;   Exit MariaDB  EXIT;      Download and Setup Nextcloud  Download Nextcloud from official site  # wget https://download.nextcloud.com/server/releases/nextcloud-22.2.3.tar.bz2   Unzip Nextcloud and place it in in /var/www/nextcloud  # tar xvf nextcloud-22.2.3.tar.bz2 -C /var/www/   Granting Access on /var/www/html/ for User and Group www-data  # chown -R www-data:www-data /var/www/nextcloud   Create a data folder for NextCloud data  # mkdir /data # chown www-data:www-data /data     Create and enable virtual host in /var/apache2/sites-available/   # cp 000-default.conf nextcloud.conf\n  Enter the following values\n  DocumentRoot \u0026quot;/var/www/nextcloud\u0026quot; ErrorLog ${APACHE_LOG_DIR}/nextcloud-error.log CustomLog ${APACHE_LOG_DIR}/nextcloud-access.log combined     Create .htaccess file to browse via Index of\n # mkdir /var/www/html/apache/ # mv index.html /var/www/html/apache/ # vi /var/www/html/.htaccess Type Options +Indexes    Enable nextcloud.conf\n # a2ensite nextcloud.conf    Enable apache2 modules\n # a2enmod rewrite    Reload apache\n # systemctl reload apache2    Fix for NextCloud 22\n in main .htaccess add (this case /var/www/html/.htaccess) \u0026lt;IfModule mod_rewrite.c\u0026gt; RewriteEngine on RewriteRule ^\\.well-known/carddav /nextcloud/remote.php/dav [R=301,L] RewriteRule ^\\.well-known/caldav /nextcloud/remote.php/dav [R=301,L] RewriteRule ^\\.well-known/webfinger /nextcloud/index.php/.well-known/webfinger [R=301,L] RewriteRule ^\\.well-known/nodeinfo /nextcloud/index.php/.well-known/nodeinfo [R=301,L] \u0026lt;/IfModule\u0026gt;      Enable user access to www-data on redis group  Create a backup for redis.conf  # cp /etc/redis/redis.conf /etc/redis/redis.conf.bak   Enable unix socket for redis  # sed -i -e 's/# unixsocket/unixsocket/' /etc/redis/redis.conf   Grant read, write, execute permissions for User and Groups  # sed -i -e '/unixsocketperm / s/ .*/ 770/' /etc/redis/redis.conf   Restart Redis Server  # systemctl restart redis \u0026amp;\u0026amp; systemctl enable redis   Add redis user to www-data group  # addgroup www-data redis addgroup apache redis   Test redis connection  # redis-cli -s /var/run/redis/redis-server.sock ping     Append lines below on config.php in Nextcloud to enable video thumbnails and memcache  # vi /var/www/html/nextcloud/config/config.php Type the following lines, before ); characters in last line 'preview_libreoffice_path' =\u0026gt; '/usr/bin/libreoffice', 'enable_previews' =\u0026gt; true, 'enabledPreviewProviders' =\u0026gt; array ( 0 =\u0026gt; 'OC\\\\Preview\\\\TXT', 1 =\u0026gt; 'OC\\\\Preview\\\\MarkDown', 2 =\u0026gt; 'OC\\\\Preview\\\\OpenDocument', 3 =\u0026gt; 'OC\\\\Preview\\\\PDF', 4 =\u0026gt; 'OC\\\\Preview\\\\MSOffice2003', 5 =\u0026gt; 'OC\\\\Preview\\\\MSOfficeDoc', 6 =\u0026gt; 'OC\\\\Preview\\\\Image', 7 =\u0026gt; 'OC\\\\Preview\\\\Photoshop', 8 =\u0026gt; 'OC\\\\Preview\\\\TIFF', 9 =\u0026gt; 'OC\\\\Preview\\\\SVG', 10 =\u0026gt; 'OC\\\\Preview\\\\Font', 11 =\u0026gt; 'OC\\\\Preview\\\\MP3', 12 =\u0026gt; 'OC\\\\Preview\\\\Movie', 13 =\u0026gt; 'OC\\\\Preview\\\\MKV', 14 =\u0026gt; 'OC\\\\Preview\\\\MP4', 15 =\u0026gt; 'OC\\\\Preview\\\\AVI', ), 'memcache.local' =\u0026gt; '\\OC\\Memcache\\Redis', 'filelocking.enabled' =\u0026gt; true, 'memcache.locking' =\u0026gt; '\\OC\\Memcache\\Redis', 'memcache.distributed' =\u0026gt; '\\OC\\Memcache\\Redis', 'redis' =\u0026gt; array( 'host' =\u0026gt; '/run/redis/redis.sock', 'port' =\u0026gt; 0, 'timeout' =\u0026gt; 0.0, ), 'default_phone_region' =\u0026gt; 'MX', 'log_type' =\u0026gt; 'file', 'logfile' =\u0026gt; 'nextcloud.log', 'loglevel' =\u0026gt; 3, 'logdateformat' =\u0026gt; \u0026quot;F d, Y H:i:s\u0026quot;,    Increase the CURL timeout  # vi /var/www/html/nextcloud/lib/private/Installer.php Search value 120 and change it to 600, so the installer can wait up to 10 minutes    Install CUPS server Install Xorg  # apt install xorg  Fixes Nextcloud Error:\n ImagickException: attempt to perform an operation not allowed by the security policy Fix: Edit /etc/ImageMagick-6/policy.xml of ImageMagick-6. In that file, change the policy rights to read/write From  \u0026lt;policy domain=\u0026quot;coder\u0026quot; rights=\u0026quot;none\u0026quot; pattern=\u0026quot;PDF\u0026quot; /\u0026gt;   To  \u0026lt;policy domain=\u0026quot;coder\u0026quot; rights=\u0026quot;read|write\u0026quot; pattern=\u0026quot;PDF\u0026quot; /\u0026gt;   If it doesn\u0026rsquo;t solve your issue, you can also enable the below line in same file. From  \u0026lt;!-- \u0026lt;policy domain=\u0026quot;module\u0026quot; rights=\u0026quot;none\u0026quot; pattern=\u0026quot;{PS,PDF,XPS}\u0026quot; /\u0026gt; --\u0026gt;   To  \u0026lt;policy domain=\u0026quot;module\u0026quot; rights=\u0026quot;read|write\u0026quot; pattern=\u0026quot;{PS,PDF,XPS}\u0026quot; /\u0026gt; Slowness when visiting services.com Error:   A long delay is visible when visiting self domaing for raspberry pi Fix: Make sure that the /etc/hosts file has the service.com poiting to localhost and selfIp address  127.0.0.1\tlocalhost server01 services.com 192.168.1.40\tserver01 services.com ::1\tlocalhost ip6-localhost ip6-loopback ff02::1\tip6-allnodes ff02::2\tip6-allrouters   Pi-Hole Error:\n System settings returning a CORS error message when using any option like \u0026ldquo;Flush network table\u0026rdquo; Failed CORS: null vs 192.168.1.40, , 192.168.1.40, pi.hole, localhost Fix: Make sure that headers Apache module is not enabled if that is the case use # a2dismod headers  ",
    "ref": "/NXGC/post/raspberry-debian11-nextcloud/"
  },{
    "title": "Nextcloud your personal cloud storage",
    "date": "",
    "description": "",
    "body": "New Nextcloud deployment:  I\u0026rsquo;ve been using linux to deploy open source and licensed software for more than 10 years, delivering software solutions for companies that offer IPTV, banking and mobile communications services.\nUna de las cosas que realmente disfruto al trabajar con linux, es el gran número de aplicaciones y servicios que tienes a tu disposición para uso personal y empresarial.\nNextcloud es una de estas aplicaciones colaborativas que son de gran utilidad para compartir, almacenar y manejar sus archivos. Este servicio está disponible para su uso personal o público. Es un servicio versatil que se adapta a todos los sistemas operativos, lo puedes encontrar disponible como aplicación para dispositivos Android, iOS, Apple o Linux.\nPara agregar más servicios a las ya poderosas capacidades de intercambio de archivos de Nextcloud, existe la opción de agregar una gran cantidad de complementos especialmente diseñado para este servicio. Incluso ofrece la capacidad de integrar aplicaciones de oficina en su propio entorno web.\nHola Culeros\n",
    "ref": "/NXGC/post/nextcloud/"
  }]
